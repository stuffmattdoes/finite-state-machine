{"version":3,"sources":["webpack://FSMRouter/webpack/universalModuleDefinition","webpack://FSMRouter/webpack/bootstrap","webpack://FSMRouter/./src/Machine.tsx","webpack://FSMRouter/external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","webpack://FSMRouter/./src/util.ts","webpack://FSMRouter/./src/Link.tsx","webpack://FSMRouter/./src/State.tsx","webpack://FSMRouter/./src/Transition.tsx","webpack://FSMRouter/./src/index.js","webpack://FSMRouter/./src/logger.tsx","webpack://FSMRouter/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://FSMRouter/./node_modules/history/index.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__1__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","MachineContext","createContext","displayName","createMachine","options","props","Machine","useMachine","useContext","current","history","id","params","machineChildren","machineHistory","machineId","ignoreHash","logging","useMemo","createBrowserHistory","_childStates","getChildStateNodes","length","Error","normalizeChildStateProps","childStates","normalizedChildStates","resolveUrlToAtomic","location","pathname","stack","url","urlMatchesPathname","replace","initialStack","useState","state","setState","log","useEffect","listen","action","target","hash","prevState","type","payload","providerValue","send","event","data","targetState","selectTransition","targetNode","find","norm","getAtomic","path","injectUrlParams","push","Provider","children","Children","toArray","getChildrenOfType","reduce","acc","child","concat","classNames","classes","next","map","className","keys","filter","Boolean","join","trim","isValidElement","isCurrentStack","split","isExactStack","pop","isDynamicSegment","segment","test","isRootPath","segmentize","seg","param","includes","toString","console","error","search","stateNodes","rootId","normalizeLoop","initialIndex","findIndex","initial","stateNode","parallel","transitions","cond","undefined","sendId","forEach","gcs","j","childStatesPopulate","initialChild","atomic","atomicExists","atomicPath","atomicStack","match","exact","childMatch","slice","isRootSegment","dynamicPaths","pathSegments","pathSegment","notFoundState","warn","deriveStateFromUrl","currentPath","currentStack","isNotFound","availableTransitions","activeTransition","transitionEvent","parentStack","Link","disabled","href","onClick","preventDefault","StateNodeContext","State","Component","machineSend","parentPath","stackPath","initialContext","componentProps","machine","Transition","ActionTypes","source","enabled","logs","setLogs","date","Date","time","getHours","getMinutes","getSeconds","getMilliseconds","logTitle","actionType","group","logEvent","logSource","logTarget","matched","transition","noMatchingState","noMatchingTransition","historyReplace","historyPush","historyPop","groupEnd","_extends","assign","arguments","apply","this","B","Pop","Push","Replace","C","b","E","returnValue","F","h","k","H","Math","random","substr","I","J","indexOf","a","idx","usr","x","q","z","v","w","go","document","defaultView","u","addEventListener","f","e","retry","replaceState","createHref","A","g","pushState","G","y","back","forward","block","removeEventListener","createHashHistory","querySelector","getAttribute","K","createMemoryHistory","min","max","initialEntries","splice"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"FSMRouter\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"FSMRouter\"] = factory(root[\"React\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__1__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","import React, { useContext, useEffect, useMemo, useState } from 'react';\nimport { History, createBrowserHistory } from 'history';\nimport useLogger from './logger';\nimport {\n    getAtomic,\n    getChildStateNodes,\n    injectUrlParams,\n    normalizeChildStateProps,\n    resolveUrlToAtomic,\n    selectTransition,\n    urlMatchesPathname\n} from './util';\n\ntype MachineContextType = {\n    current: string,\n    history: History,\n    id: string,\n    params: { [name: string]: string },\n    send: (event: string) => void\n}\n\nexport const MachineContext = React.createContext<Partial<MachineContextType>>({});\nMachineContext.displayName = 'Machine';\n\n// TODO: ignore hash option - doesn't resolve if only URL hash changes\nexport const createMachine = (options: any) => (props: any) => Machine({ ...props, ...options });\n\nexport const useMachine = () => {\n    const { current, history, id, params, send } = useContext(MachineContext);\n    return [{ current, history, id, params }, send ];\n}\n\ntype State = {\n    current: string;\n    location: Partial<Location>;\n    params: {\n        [name: string]: string;\n    };\n}\n\ntype MachineProps = {\n    history: History,\n    id: string,\n    ignoreHash: boolean,\n    logging: boolean\n}\n\nconst Machine: React.FC<MachineProps> = ({ children: machineChildren, history: machineHistory, id: machineId = 'machine', ignoreHash = false, logging = false }) => {\n    const history = useMemo(() => machineHistory || createBrowserHistory(), []);\n\n    const [ childStates, normalizedChildStates ] = useMemo(() => {\n        const _childStates = getChildStateNodes(machineChildren as React.ReactElement);\n\n        if (_childStates.length === 0) {\n            throw new Error('<Machine/> has no children <State/> nodes! At least one is required to be considered a valid state machine.');\n        }\n\n        const _normalizedChildStates = normalizeChildStateProps(_childStates, machineId);\n        \n        return [ _childStates, _normalizedChildStates ];\n    }, [ machineChildren ]);\n\n    const [ initialStack, params ] = useMemo(() => {\n        const { params, path, stack, url } = resolveUrlToAtomic(history.location.pathname, normalizedChildStates, machineId);\n        \n        // For mount\n        if (urlMatchesPathname(history.location.pathname, url)) {\n            history.replace(url);\n        }\n\n        return [ stack, params ];\n    }, []);\n\n    const [ state, setState ] = useState<State>({\n        current: initialStack!,\n        location: history.location,\n        params\n    });\n    const [ logs, log ] = useLogger({ current: state.current!, location: state.location }, logging);\n\n    const send = (event: string, data: any = null) => {\n        const targetState = selectTransition(event, state.current!, normalizedChildStates);\n\n        if (targetState) {\n            const params = data && data.params || state.params;\n            const { event: transitionEvent, target: targetId } = targetState;\n            const targetNode = normalizedChildStates.find(norm => norm.id === targetId);\n\n            if (targetNode) {\n                const { path, stack } = getAtomic(targetNode.stack, normalizedChildStates);\n                const url = injectUrlParams(path, params);\n\n                if (url !== history.location.pathname) {\n                    history.push(url, { target: stack });\n                } else {\n                    setState((prevState) => ({\n                        current: stack,\n                        location: history.location,\n                        params\n                    }));\n                }\n\n                log({\n                    type: 'TRANSITION',\n                    payload: {\n                        event,\n                        target: { params, location: history.location, state: stack }\n                    }\n                });\n            } else {\n                log({\n                    type: 'NO_MATCHING_STATE',\n                    payload: { \n                        event,\n                        target: { params, state: targetId }\n                    }\n                });\n            }\n        } else {\n            log({\n                type: 'NO_MATCHING_TRANSITION',\n                payload: { event }\n            });\n        }\n    }\n\n    /*\n        useMemo ensures history listener is invoked prior to render.\n        This is vital to ensure any \"send\" events in child \"useEffects\" are captured\n    */\n\n    useEffect(() => history.listen(({ action, location }) => {\n        const { params, path, stack, url } = resolveUrlToAtomic(location.pathname, normalizedChildStates, machineId);\n        let target = stack;\n\n        // After mount\n        if (urlMatchesPathname(history.location.pathname, url)) {\n            history.replace(url);\n        }\n\n        if (ignoreHash && state.location.hash !== location.hash) {\n            setState((prevState) => ({\n                ...prevState,\n                location: history.location,\n                params\n            }));\n            return;\n        }\n\n        // TODO - check to see if URL update changes lineage, or if is exact match. If so, update stack\n        // Could compare match.isExact also\n\n        if (location.state && location.state.target) {\n            target = location.state.target;\n        } \n\n        if (action === 'POP' || (!location.state || !location.state.target)) {\n            log({\n                type: `HISTORY_${action}`,\n                payload: {\n                    target: { target, params, location: history.location, state: stack }\n                }\n            });\n        }\n\n        setState((prevState) => ({\n            current: target!,\n            location: history.location,\n            params\n        }));\n    }));\n\n    const providerValue = {\n        ...state,\n        history,\n        id: machineId,\n        send\n    };\n\n    return <MachineContext.Provider value={providerValue}>\n        {childStates}\n    </MachineContext.Provider>;\n}\n\nMachine.displayName = 'Machine';\n\nexport default Machine;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","import React from 'react';\n\nexport const getChildStateNodes = (children: React.ReactElement): React.ReactElement[] => {\n    const childArray = React.Children.toArray(children);\n\n    if (childArray.length) {\n        const childStates = getChildrenOfType(children, 'State');\n\n        if (childStates.length) {\n            return childStates;\n        }\n        \n        if (children.props?.children) {\n            return children.props?.children.reduce((acc: React.ReactElement[], child: React.ReactElement) => {\n                acc = acc.concat(getChildrenOfType(child.props.children, 'State'));\n                return acc;\n            }, []);\n        }\n    }\n\n    return [];\n}\n\ntype ClasseName = string | { [name: string]: boolean };\n\nexport const classNames = (classes: ClasseName[]): string => {\n    const next = classes.map((className: ClasseName) => {\n        switch(typeof className) {\n            case 'string':\n                return className;\n            case 'object':\n                return Object.keys(className).filter((key) => Boolean(className[key])).join(' ').trim();\n            default:\n                return '';\n        }\n    }).join(' ').trim();\n\n    return Boolean(next) ? next : '';\n}\n\nconst getChildrenOfType = (children: React.ReactElement, type: string): React.ReactElement[] =>\n    React.Children.toArray(children).filter((child) =>\n        React.isValidElement(child) ? child.type === type : false) as React.ReactElement[];\n\nexport const isCurrentStack = (id: string, stack: string): boolean => !!stack.split('.').find((state) => state === id);\nexport const isExactStack = (id: string, stack: string): boolean => stack.split('.').pop() === id;\nconst isDynamicSegment = (segment: string): boolean => /^:(.+)/.test(segment);\nconst isRootPath = (path: string): boolean => path === '/';\nconst isRootSegment = (url: string): boolean => url.slice(1) === '';\nconst isRootStack = (stack: string): boolean => !stack.match(/\\./g);\nconst isNotFound = (stack: string): boolean => stack.split('.').pop() === '*';\nconst segmentize = (url: string): string[] => url.split('/').filter(Boolean);\n\nexport const injectUrlParams = (path: string, params: { [name: string]: string }): string => {\n    const url = segmentize(path).map((seg) => {\n        if (isDynamicSegment(seg)) {\n            const param = seg.replace(':', '');\n\n            if (Object.keys(params).includes(param)) {\n                return params[param].toString();\n            } else {\n                console.error(`Cannot push to a dynamic URL without supplying the proper parameters: ${seg} parameter is missing.`);\n                return 'undefined';\n            }\n        }\n\n        return seg;\n    }).join('/');\n\n    return '/' + url + (window.location.search ? window.location.search : '');\n}\n\ntype StateMatch = {\n    exact: boolean,\n    params: { [key: string]: string },\n    path: string | null,\n    stack: string | null,\n    url: string | null\n}\n\nconst deriveStateFromUrl = (url: string, normalizedChildStates: NormalizedState[], rootId: string): StateMatch => {\n    let match: StateMatch = {\n        exact: false,\n        params: {},\n        path: url,\n        stack: null,\n        url: null\n    }\n\n    // 1. Exact match, no dynamic URL needed\n    const childMatch = normalizedChildStates.find((norm) => norm.path === url);\n\n    if (childMatch) {\n        match.path = childMatch.path;\n        match.stack = childMatch.stack;\n        return match;\n    }\n\n    // 1.1 Check if URL is root, return initial stack\n    if (isRootSegment(url)) {\n        match.stack = normalizedChildStates.find((norm) =>\n            norm.stack.match(/\\./g)!.length === 1 && norm.initial)!.stack;\n        return match;\n    }\n\n    // 2. No exact match yet, compare to dynamic URLs for match\n    const dynamicPaths = normalizedChildStates.filter((norm) => norm.path && norm.path.match(/\\/:/g)).map((norm) => norm.path);\n\n    if (dynamicPaths.length) {\n        // 2.1 Split url && child paths into arrays, compare 1 by 1\n        const urlSegments = segmentize(url);;\n        \n        // let params = {};\n        const dynamicPathMatch = dynamicPaths.find(p => {\n            const pathSegments = segmentize(p);\n            match.params = {};\n\n            // Can't be a match if our path segments is not the same length as our URL segments\n            if (pathSegments.length !== urlSegments.length) {\n                return false;\n            }\n\n            // TODO\n            // path doesn't parse params if complete path match is not found\n            return !pathSegments.map((pathSegment, i) => {\n                // 2.2 infer parameter from URL from first segment array that matches in length\n                if (isDynamicSegment(pathSegment)) {\n                    match.params[pathSegment.slice(1)] = urlSegments[i];\n                    return true;\n                // 2.3 if path segment matches url segment exactly, proceed\n                } else if (pathSegment === urlSegments[i]) {\n                    return true;\n                }\n\n                return false;\n            }).includes(false);\n        });\n\n        if (dynamicPathMatch) {\n            // 2.4 finally, return the stack that corresponds to the URL\n            match.path = dynamicPathMatch;\n            match.stack = normalizedChildStates.find((norm) => norm.path === dynamicPathMatch)!.stack;\n        }\n    }\n\n    // 3.0 if no match, resolve to wildcard route \"*\"\"\n    if (!match.stack) {\n        const notFoundState = normalizedChildStates.find((norm) => norm.id === '*');\n        match.stack = '#' + rootId + '.*';\n\n        // 3.1 If no wildcard route \"*\", throw error\n        if (!notFoundState) {\n            console.warn(`No <State/> configuration matches URL \"${url}, and no catch-all <State id='*' path='/404'/> exists. Consider adding one.`);\n        }\n    }\n\n    return match;\n}\n\ntype TransitionType = {\n    cond: boolean,\n    event: string,\n    sendId: string,\n    target: string\n}\n\ntype NormalizedState = {\n    childStates: string[],\n    id: string,\n    initial: boolean,\n    path: string,\n    stack: string,\n    transitions: TransitionType[],\n    type: 'atomic' | 'compound' | 'default' | 'parallel'\n}\n\nexport const normalizeChildStateProps = (stateNodes: React.ReactElement[], rootId: string): NormalizedState[] => {\n    const normalizeLoop = (stateNodes: React.ReactElement[]) => {\n        let initialIndex = stateNodes.findIndex((s) => s.props.initial);\n        initialIndex = initialIndex >= 0 ? initialIndex : 0;\n\n        return stateNodes.reduce((acc: NormalizedState[], stateNode, i) => {\n            const { children, id, parallel, path = '/' } = stateNode.props;\n            const childStates = getChildStateNodes(children);\n            const transitions = getChildrenOfType(children, 'Transition')\n                .map(({ props }) => ({\n                    cond: props.cond === true || props.cond === undefined ? true : false,\n                    event: props.event,\n                    sendId: id,\n                    target: props.target\n                }));\n\n            // Add current state node to array\n            acc.push({\n                childStates: childStates.map((child) => child.props.id),\n                id,\n                initial: initialIndex === i,\n                path,\n                stack: '.' + id,\n                transitions,\n                type: parallel ? 'parallel'\n                    : childStates.length === 0 ? 'atomic'\n                    : childStates.length > 1 ? 'compound' : 'default'\n            });\n\n            // Add children state nodes to array, recursively\n            if (childStates.length) {\n                normalizeLoop(childStates).forEach((gcs, j) => acc.push({\n                    childStates: gcs.childStates,\n                    id: gcs.id,\n                    initial: gcs.initial,\n                    path: !isRootPath(path) ? !isRootPath(gcs.path) ? path + gcs.path : path : gcs.path,\n                    stack: '.' + id + gcs.stack,\n                    transitions: gcs.transitions,\n                    type: gcs.type\n                }));\n            }\n\n            return acc;\n        }, []);\n    };\n\n    return normalizeLoop(React.Children.toArray(stateNodes) as React.ReactElement[]).map((norm) => {\n        norm.stack = '#' + rootId + norm.stack;\n        return norm;\n    });\n}\n\ntype AtomicState = { path: string, stack: string };\n\nexport const getAtomic = (stack: string, normalizedChildStates: NormalizedState[]): AtomicState => {\n    const { childStates, path, stack: _stack } = normalizedChildStates.find((child) =>  child.stack === stack)!;\n    let initial: AtomicState = {\n        path,\n        stack: _stack\n    }\n\n    if (childStates.length) {\n        const childStatesPopulate = childStates.map((id: string) => normalizedChildStates.find((norm) => norm.id === id)!);\n        const initialChild = childStatesPopulate.find((child: NormalizedState) => child.initial) || childStatesPopulate[0];\n\n        if (initialChild.childStates.length) {\n            return getAtomic(initialChild.stack, normalizedChildStates);\n        } else {\n            initial.path = initialChild.path || '/';\n            initial.stack = initialChild.stack;\n        }\n    }\n\n    return initial;\n}\n\nexport const resolveUrlToAtomic = (url: string, normalizedChildStates: NormalizedState[], machineId: string) => {\n    type AtomicExists = {\n        params: { [name: string]: string },\n        path: string | null,\n        stack: string | null,\n        url: string\n    }\n\n    let atomic: AtomicExists = {\n        params: {},\n        path: null,\n        stack: null,\n        url\n    };\n\n    const atomicExists = (stack: string, path: string): AtomicExists => {\n        const { path: atomicPath, stack: atomicStack } = getAtomic(stack, normalizedChildStates);\n        return {\n            ...atomic,\n            path: atomicPath,\n            stack: atomicStack,\n            url: injectUrlParams(atomicPath, atomic.params)\n        }\n    }\n\n    if (isRootPath(url)) {\n        const { stack } = normalizedChildStates[0];\n        atomic = atomicExists(stack, url);\n    } else {\n        const { params, path: currentPath, stack: currentStack } = deriveStateFromUrl(url, normalizedChildStates, machineId);\n        atomic = {\n            ...atomic,\n            params,\n            path: currentPath,\n            stack: currentStack\n        }\n\n        if (!isNotFound(currentStack!)) {\n            atomic = atomicExists(currentStack!, currentPath!);\n        }\n    }\n\n    return atomic;\n}\n\nexport const selectTransition = (event: string, currentStack: string, normalizedChildStates: NormalizedState[]): TransitionType | null => {\n    if (isRootStack(currentStack)) {\n        return null;\n    }\n\n    const availableTransitions = normalizedChildStates && normalizedChildStates.find(norm => norm.stack === currentStack)?.transitions;\n\n    if (availableTransitions?.length) {\n        const activeTransition = availableTransitions.find(({ cond, event: transitionEvent, target }) => \n            transitionEvent === event && (cond === null || cond === true));\n        if (activeTransition) {\n            return activeTransition;\n        }\n    }\n\n    const parentStack = currentStack.split('.').slice(0, -1).join('.');\n    return selectTransition(event, parentStack, normalizedChildStates);\n}\n\nexport const urlMatchesPathname = (pathname: string, url: string): boolean => pathname !== url.split('?')[0];\n","import React, { useContext } from 'react';\nimport { classNames } from './util';\nimport { MachineContext } from './Machine';\n\ntype LinkProps = HTMLAnchorElement & {\n    className: string,\n    disabled: boolean,\n    onClick: (event: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => void,\n    replace: boolean\n}\n\nconst Link: React.FC<LinkProps> = ({ children, className, disabled = false, href = '#', onClick, replace = false }) => {\n    const { current, history } = useContext(MachineContext);\n\n    const handleClick = (event: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => {\n        event.preventDefault();\n\n        if (disabled) {\n            return;\n        }\n\n        const action = replace ? 'replace' : 'push';\n        history![action](href);\n        onClick && onClick(event);\n    }\n\n    return <a className={classNames([\n        className,\n        { \n            'link-exact': href === history!.location.pathname,\n            'link-active': history!.location.pathname.includes(href),\n            'disabled': disabled\n        }\n    ])} href={href} onClick={handleClick}>{children}</a>\n}\n\nLink.displayName = 'Link';\n\nexport default Link;","import React, { useContext } from 'react';\nimport { MachineContext } from './Machine';\nimport { isCurrentStack, isExactStack } from './util';\n\ntype StateNodeContextProps = {\n    id: string,\n    path: string,\n    stack: string,\n    send: (event: string) => void,\n}\n\nexport const StateNodeContext = React.createContext<Partial<StateNodeContextProps>>({});\nStateNodeContext.displayName = 'StateNode';\n\ntype StateProps = {\n    component: React.ElementType,\n    id: string,\n    initial: boolean,\n    path: string\n}\n\ntype Match = {\n    exact: boolean,\n    params?: { [key: string]: string },\n    path: string,\n    url: string\n} | boolean;\n\ntype ComponentProps = {\n    children: React.ReactNode,\n    history: any,\n    machine: {\n        current: string,\n        send: (id: string) => void\n    },\n    match: Match\n}\n\nconst State: React.FC<StateProps> = ({ children, component: Component, id, initial, path }) => {\n    const { current, history, id: machineId, params, send: machineSend } = useContext(MachineContext);\n    const { id: parentId, path: parentPath, stack: parentStack } = useContext(StateNodeContext);\n    const stack = parentStack ? `${parentStack}.${id}` : `#${machineId}.${id}`;\n    const stackPath = path ? parentPath ? parentPath + path : path : parentPath || '';\n    const match: Match = isCurrentStack(id, current!) ? {\n        exact: isExactStack(id, current!),\n        params,\n        path: stackPath,\n        url: history!.location.pathname\n    } : false;\n\n    const initialContext: StateNodeContextProps = {\n        id,\n        path: stackPath,\n        stack,\n        send: machineSend!,\n    }\n    const componentProps: ComponentProps = {\n        children,\n        history,\n        machine: {\n            current: current!,\n            send: machineSend!\n        },\n        match\n    }\n\n    return match ?\n        <StateNodeContext.Provider value={initialContext}>\n            { Component ?\n                <Component {...componentProps}/>\n            : children }\n        </StateNodeContext.Provider>\n    : null;\n}\n\nState.displayName = 'State';\n\nexport default State;\n","type TransotionProps = {\n    event: string,\n    target: string\n}\n\nconst Transition = (props: TransotionProps) => null;\nTransition.displayName = 'Transition';\n\nexport default Transition;\n","import Link from './Link';\nimport Machine, { createMachine, useMachine } from './Machine';\nimport State from './State';\nimport Transition from './Transition';\n\nexport {\n    createMachine,\n    Link,\n    Machine,\n    State,\n    Transition,\n    useMachine\n}","import React, { useState } from 'react';\n\n// type TransitionLog = {\n//     source: { state: \"stateId\", : path: \"/path\" }\n//     event: { event: \"event-name\", : data: { ...data }}\n//     matched: { state: \"stateId\", oath: \"/path\" } // if transition isn't child:\n//     target: { state: \"stateId\", : path: \"/path\" }\n//     resolved: { state: \"stateId\", : path: \"/path\" } // if not atomic:\n// }\n\n// type EventDiscardedLog = {\n//     source: { state: \"stateId\", : path: \"/path\" },\n//     target: { state: \"stateId\", : path: \"/path\" }\n// }\n\n// type HistoryLog = {\n//     source: { state: \"stateId\", : path: \"/path\" },\n//     url: \"/path\",\n//     target: { state: \"stateId\", : path: \"/path\" },\n//     resolved: { state: \"stateId\", : path: \"/path\" } //if not atomic:\n// }\n\ntype TransitionAction = {\n    type: ActionTypes.transition,\n    payload: {\n        event: string,\n        target: {\n            params: { [name: string]: string },\n            location: Partial<Location>,\n            state: string\n        }\n    }\n}\n\ntype HistoryAction = {\n    type: ActionTypes.historyPop | ActionTypes.historyPush | ActionTypes.historyReplace,\n    payload: {\n        target: {\n            target: string,\n            params: { [name: string]: string },\n            location: Partial<Location>,\n            state: string\n        }\n    }\n}\n\ntype NoMatchinStateAction = {\n    type: ActionTypes.noMatchingState,\n    payload: { \n        event: string,\n        target: {\n            params: { [name: string]: string },\n            state: string\n        }\n    }\n}\n\ntype NoMatchingTransitionAction = {\n    type: ActionTypes.noMatchingTransition,\n    payload: {\n        event: string\n    }\n}\n\nenum ActionTypes {\n    historyReplace = 'history/REPLACE',\n    historyPush = 'history/PUSH',\n    historyPop = 'history/POP',\n    transition = 'machine/TRANSITION',\n    noMatchingState = 'machine/NO_MATCHING_STATE',\n    noMatchingTransition = 'machine/NO_MATCHING_TRANSITION'\n}\n\ntype Action = TransitionAction | HistoryAction | NoMatchinStateAction | NoMatchingTransitionAction;\n\ntype Log = ({ type, payload }: Action | any) => void;\n\ntype UseLogger = (source: { current: string, location: Partial<Location> }, enabled: boolean) => [ Action[], Log ];\n\nconst useLogger: UseLogger = (source, enabled) => {\n    if (!enabled) {\n        return [ [], () => {} ];\n    }\n\n    const [ logs, setLogs ] = useState<Action[]>([]);\n    const log: Log = ({ type, payload }) => {\n        const date = new Date();\n        const time = `${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}.${date.getMilliseconds()}`;\n        const { event, target } = payload;\n\n        const logTitle = (actionType = type.replace(/_/g, ' ')) => \n            console.group(`%cFSM-Router action: %c${actionType} %c@ ${time}`,\n                'color: grey; font-weight: normal', 'font-weight: bold;', 'color: grey; font-weight: normal');\n        const logEvent = () => console.log('%cevent:', 'color: blue; font-weight: bold;', event);\n        const logSource = () => console.log('%csource:', 'color: grey; font-weight: bold;', { state: source.current, location: source.location });\n        const logTarget = () => {\n            if (target.exact) {\n                console.log('%ctarget', 'color: green; font-weight: bold;', {\n                    location: target.location,\n                    matched: target.exact,\n                    state: target.state\n                    // resolved: { state: target.state, path: target.path }\n                    // search: target.location.search\n                });\n            } else {\n                console.log('%ctarget', 'color: green; font-weight: bold;', { state: target.state, location: target.location });\n            }\n        }\n\n        switch(type) {\n            case ActionTypes.transition:\n                logTitle();\n                logEvent();\n                logSource();\n                logTarget();\n                break;\n            case ActionTypes.noMatchingState:\n                logTitle('EVENT DISCARDED');\n                console.log(`%cdetails: %cNo matching <State id=\"%c${target.state}%c\"/> found.`,\n                    'color: red; font-weight: bold;', null, 'font-weight: bold; font-family: monospace;', null);\n                logEvent();\n                logSource();\n                console.log('%ctarget', 'color: green; font-weight: bold;', { state: target.state });\n                break;\n            case ActionTypes.noMatchingTransition:\n                logTitle('EVENT DISCARDED');\n                console.log(`%cdetails: %cNo matching <Transition id=\"%c${event}%c\"/> found within source state or any of its ancestors.`,\n                    'color: red; font-weight: bold;', null, 'font-weight: bold; font-family: monospace;', null);\n                logEvent();\n                logSource();\n                break;\n            case ActionTypes.historyReplace:\n            case ActionTypes.historyPush:\n            case ActionTypes.historyPop:\n                logTitle();\n                console.log('%cpath', 'color: blue; font-weight: bold;', target.location.pathname);\n                logSource();\n                logTarget();\n                break;\n        }\n\n        console.groupEnd();\n        setLogs(logs.concat({ type, payload }));\n    }\n\n    return [ logs, log ];\n}\n\nexport default useLogger;","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import _extends from'@babel/runtime/helpers/esm/extends';var r,B=r||(r={});B.Pop=\"POP\";B.Push=\"PUSH\";B.Replace=\"REPLACE\";var C=\"production\"!==process.env.NODE_ENV?function(b){return Object.freeze(b)}:function(b){return b};function D(b,h){if(!b){\"undefined\"!==typeof console&&console.warn(h);try{throw Error(h);}catch(k){}}}function E(b){b.preventDefault();b.returnValue=\"\"}\nfunction F(){var b=[];return{get length(){return b.length},push:function(h){b.push(h);return function(){b=b.filter(function(k){return k!==h})}},call:function(h){b.forEach(function(k){return k&&k(h)})}}}function H(){return Math.random().toString(36).substr(2,8)}function I(b){var h=b.pathname,k=b.search;b=b.hash;return(void 0===h?\"/\":h)+(void 0===k?\"\":k)+(void 0===b?\"\":b)}\nfunction J(b){var h={};if(b){var k=b.indexOf(\"#\");0<=k&&(h.hash=b.substr(k),b=b.substr(0,k));k=b.indexOf(\"?\");0<=k&&(h.search=b.substr(k),b=b.substr(0,k));b&&(h.pathname=b)}return h}\nfunction createBrowserHistory(b){function h(){var c=p.location,a=m.state||{};return[a.idx,C({pathname:c.pathname,search:c.search,hash:c.hash,state:a.usr||null,key:a.key||\"default\"})]}function k(c){return\"string\"===typeof c?c:I(c)}function x(c,a){void 0===a&&(a=null);return C(_extends({pathname:q.pathname,hash:\"\",search:\"\"},\"string\"===typeof c?J(c):c,{state:a,key:H()}))}function z(c){t=c;c=h();v=c[0];q=c[1];d.call({action:t,location:q})}function A(c,a){function e(){A(c,a)}var l=r.Push,g=x(c,\na);if(!f.length||(f.call({action:l,location:g,retry:e}),!1)){var n=[{usr:g.state,key:g.key,idx:v+1},k(g)];g=n[0];n=n[1];try{m.pushState(g,\"\",n)}catch(G){p.location.assign(n)}z(l)}}function y(c,a){function e(){y(c,a)}var l=r.Replace,g=x(c,a);f.length&&(f.call({action:l,location:g,retry:e}),1)||(g=[{usr:g.state,key:g.key,idx:v},k(g)],m.replaceState(g[0],\"\",g[1]),z(l))}function w(c){m.go(c)}void 0===b&&(b={});b=b.window;var p=void 0===b?document.defaultView:b,m=p.history,u=null;p.addEventListener(\"popstate\",\nfunction(){if(u)f.call(u),u=null;else{var c=r.Pop,a=h(),e=a[0];a=a[1];if(f.length)if(null!=e){var l=v-e;l&&(u={action:c,location:a,retry:function(){w(-1*l)}},w(l))}else\"production\"!==process.env.NODE_ENV?D(!1,\"You are trying to block a POP navigation to a location that was not created by the history library. The block will fail silently in production, but in general you should do all navigation with the history library (instead of using window.history.pushState directly) to avoid this situation.\"):\nvoid 0;else z(c)}});var t=r.Pop;b=h();var v=b[0],q=b[1],d=F(),f=F();null==v&&(v=0,m.replaceState(_extends({},m.state,{idx:v}),\"\"));return{get action(){return t},get location(){return q},createHref:k,push:A,replace:y,go:w,back:function(){w(-1)},forward:function(){w(1)},listen:function(c){return d.push(c)},block:function(c){var a=f.push(c);1===f.length&&p.addEventListener(\"beforeunload\",E);return function(){a();f.length||p.removeEventListener(\"beforeunload\",E)}}}};\nfunction createHashHistory(b){function h(){var a=J(m.location.hash.substr(1)),e=a.pathname,l=a.search;a=a.hash;var g=u.state||{};return[g.idx,C({pathname:void 0===e?\"/\":e,search:void 0===l?\"\":l,hash:void 0===a?\"\":a,state:g.usr||null,key:g.key||\"default\"})]}function k(){if(t)c.call(t),t=null;else{var a=r.Pop,e=h(),l=e[0];e=e[1];if(c.length)if(null!=l){var g=q-l;g&&(t={action:a,location:e,retry:function(){p(-1*g)}},p(g))}else\"production\"!==process.env.NODE_ENV?D(!1,\"You are trying to block a POP navigation to a location that was not created by the history library. The block will fail silently in production, but in general you should do all navigation with the history library (instead of using window.history.pushState directly) to avoid this situation.\"):\nvoid 0;else A(a)}}function x(a){var e=document.querySelector(\"base\"),l=\"\";e&&e.getAttribute(\"href\")&&(e=m.location.href,l=e.indexOf(\"#\"),l=-1===l?e:e.slice(0,l));return l+\"#\"+(\"string\"===typeof a?a:I(a))}function z(a,e){void 0===e&&(e=null);return C(_extends({pathname:d.pathname,hash:\"\",search:\"\"},\"string\"===typeof a?J(a):a,{state:e,key:H()}))}function A(a){v=a;a=h();q=a[0];d=a[1];f.call({action:v,location:d})}function y(a,e){function l(){y(a,e)}var g=r.Push,n=z(a,e);\"production\"!==process.env.NODE_ENV?\nD(\"/\"===n.pathname.charAt(0),\"Relative pathnames are not supported in hash history.push(\"+JSON.stringify(a)+\")\"):void 0;if(!c.length||(c.call({action:g,location:n,retry:l}),!1)){var G=[{usr:n.state,key:n.key,idx:q+1},x(n)];n=G[0];G=G[1];try{u.pushState(n,\"\",G)}catch(K){m.location.assign(G)}A(g)}}function w(a,e){function l(){w(a,e)}var g=r.Replace,n=z(a,e);\"production\"!==process.env.NODE_ENV?D(\"/\"===n.pathname.charAt(0),\"Relative pathnames are not supported in hash history.replace(\"+JSON.stringify(a)+\n\")\"):void 0;c.length&&(c.call({action:g,location:n,retry:l}),1)||(n=[{usr:n.state,key:n.key,idx:q},x(n)],u.replaceState(n[0],\"\",n[1]),A(g))}function p(a){u.go(a)}void 0===b&&(b={});b=b.window;var m=void 0===b?document.defaultView:b,u=m.history,t=null;m.addEventListener(\"popstate\",k);m.addEventListener(\"hashchange\",function(){var a=h()[1];I(a)!==I(d)&&k()});var v=r.Pop;b=h();var q=b[0],d=b[1],f=F(),c=F();null==q&&(q=0,u.replaceState(_extends({},u.state,{idx:q}),\"\"));return{get action(){return v},get location(){return d},\ncreateHref:x,push:y,replace:w,go:p,back:function(){p(-1)},forward:function(){p(1)},listen:function(a){return f.push(a)},block:function(a){var e=c.push(a);1===c.length&&m.addEventListener(\"beforeunload\",E);return function(){e();c.length||m.removeEventListener(\"beforeunload\",E)}}}};\nfunction createMemoryHistory(b){function h(d,f){void 0===f&&(f=null);return C(_extends({pathname:t.pathname,search:\"\",hash:\"\"},\"string\"===typeof d?J(d):d,{state:f,key:H()}))}function k(d,f,c){return!q.length||(q.call({action:d,location:f,retry:c}),!1)}function x(d,f){u=d;t=f;v.call({action:u,location:t})}function z(d,f){var c=r.Push,a=h(d,f);\"production\"!==process.env.NODE_ENV?D(\"/\"===t.pathname.charAt(0),\"Relative pathnames are not supported in memory history.push(\"+JSON.stringify(d)+\")\"):\nvoid 0;k(c,a,function(){z(d,f)})&&(m+=1,p.splice(m,p.length,a),x(c,a))}function A(d,f){var c=r.Replace,a=h(d,f);\"production\"!==process.env.NODE_ENV?D(\"/\"===t.pathname.charAt(0),\"Relative pathnames are not supported in memory history.replace(\"+JSON.stringify(d)+\")\"):void 0;k(c,a,function(){A(d,f)})&&(p[m]=a,x(c,a))}function y(d){var f=Math.min(Math.max(m+d,0),p.length-1),c=r.Pop,a=p[f];k(c,a,function(){y(d)})&&(m=f,x(c,a))}void 0===b&&(b={});var w=b;b=w.initialEntries;w=w.initialIndex;var p=(void 0===\nb?[\"/\"]:b).map(function(d){var f=C(_extends({pathname:\"/\",search:\"\",hash:\"\",state:null,key:H()},\"string\"===typeof d?J(d):d));\"production\"!==process.env.NODE_ENV?D(\"/\"===f.pathname.charAt(0),\"Relative pathnames are not supported in createMemoryHistory({ initialEntries }) (invalid entry: \"+JSON.stringify(d)+\")\"):void 0;return f}),m=Math.min(Math.max(null==w?p.length-1:w,0),p.length-1),u=r.Pop,t=p[m],v=F(),q=F();return{get index(){return m},get action(){return u},get location(){return t},createHref:function(d){return\"string\"===\ntypeof d?d:I(d)},push:z,replace:A,go:y,back:function(){y(-1)},forward:function(){y(1)},listen:function(d){return v.push(d)},block:function(d){return q.push(d)}}};export{r as Action,createBrowserHistory,createHashHistory,createMemoryHistory,I as createPath,J as parsePath}\n//# sourceMappingURL=index.js.map\n"],"sourceRoot":""}